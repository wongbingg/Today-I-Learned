###### tags: `디자인패턴`

# [iOS] 전략 패턴

### 🔘 의도

- **전략 패턴**은 알고리즘들의 패밀리를 정의하고, 각 패밀리를 별도의 클래스에 넣은 후 그들의 객체들을 상호교환할 수 있도록 하는 행동 디자인 패턴이다. 

### 🔘 문제

- 내비 앱에 [도로로 된 경로], [도보 경로], [자전거 경로], [관광명소 경로] 등 옵션을 순차적으로 추가해야 될 상황이 발생 !
- 새 경로 구축 알고리즘을 추가할 때마다 내비게이터의 메인 클래스가 늘어났다.
- 간단한 버그를 수정하거나 간단한 조절을 위해 알고리즘 중 하나를 변경하면 전체 클래스에 영향을 미쳤다.
- 병합충돌이 많아졌다.

### 🔘 해결책

- 전략 패턴은 특정 작업을 다양한 방식으로 수행하는 클래스를 선택한 후 모든 알고리즘을 전략들 (strategies) 라는 별도의 클래스들로 추출할 것을 제안한다.
- 콘텍스트(context)라는 원래 클래스에는 전략 중 하나에 대한 참조를 저장하기 위한 필드가 있어야 한다. 콘텍스트는 작업을 자체적으로 실행하는 대신 연결된 전략 객체에 위임한다.
![](https://i.imgur.com/4IR55Hm.png)

### 🔘 구조

![](https://i.imgur.com/Ap4c6Dv.png)

### 🔘 적용
- 전략 패턴은 객체 내에서 한 알고리즘의 다양한 변형들을 사용하고 싶을 때, 그리고 런타임 중에 한 알고리즘에서 다른 알고리즘으로 전환하고 싶을 때 사용한다.
- 전략 패턴은 일부 행동을 실행하는 방식에서만 차이가 있는 유사한 클래스들이 많은 경우에 사용한다.
- 전략 패턴을 사용하여 클래스의 비즈니스 로직을 해당 로직의 콘텍스트에서 그리 중요하지 않을지도 모르는 알고리즘의 구현 세부 사항들로부터 고립한다.
- 이 패턴은 같은 알고리즘의 다른 변형들 사이를 전환하는 거대한 조건문이 당신의 클래스에 있는 경우에 사용한다.
    - > switch 문을 통해 전환시키는 방법을 이야기 하는 것 같다


### 🔘 장단점


| 장점 | 단점 |
| :------: | :------: |
| ✅ 런타임에 한 객체 내부에서 사용되는 <br> 알고리즘들을 교환할 수 있습니다.     | ❌알고리즘이 몇 개밖에 되지 않고 거의 변하지<br> 않는다면, 패턴과 함께 사용되는 새로운 <br> 클래스들과 인터페이스들로 프로그램을 <br> 지나치게 복잡하게 만들 이유가 없습니다.   |
|✅알고리즘을 사용하는 코드에서 알고리즘의<br>구현 세부 정보들을 고립할 수 있습니다.|❌클라이언트들은 적절한 전략을 선택할 수<br>있도록 전략 간의 차이점들을 알고 있어야<br> 합니다|
|✅상속을 합성으로 대체할 수 있습니다|❌현대의 많은 프로그래민 언어에는 익명 <br>함수들의 집합 내에서 알고리즘의 다양한<br>버전들을 구현할 수 있는 함수형 지원이 있으며,<br> 클래스들과 인터페이스들을 추가하여<br>코드의 부피를 늘리지 않으면서도 전략객체를<br>사용했을 때와 똑같이 이러한 함수들을 사용할<br>수 있습니다.|
|✅개방/폐쇄 원칙. 콘텍스트를 변경하지 않고도<br>새로운 전략들을 도입할 수 있습니다.||

### ☑️ 예시코드 
[깃허브 링크](https://github.com/wongbingg/design-patterns-in-swift/tree/main/10.%20Strategy)

## 🔗 Reference
- [Refactoring Guru - Strategy](https://refactoring.guru/ko/design-patterns/strategy)
